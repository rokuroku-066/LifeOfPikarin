# ðŸŽ¯ å…¨ä½“ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨è¨­è¨ˆæ–¹é‡

* Python å®Ÿè£…ï¼ˆ`src/terrarium`ï¼‰ã¯æ±ºå®šè«–çš„ãª Simulation Core ã¨ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’é…ä¿¡ã™ã‚‹ Web ã‚µãƒ¼ãƒãƒ¼ã§æ§‹æˆã•ã‚Œã‚‹ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯çŠ¶æ…‹ã‚’èª­ã¿å–ã‚‹ã ã‘ã§æ›¸ãè¾¼ã¾ãªã„ã€‚

## ç›®çš„

* ä¿¯çž°å›ºå®šã‚«ãƒ¡ãƒ©ã§**é•·æ™‚é–“çœºã‚ã‚‰ã‚Œã‚‹æ˜ åƒä½œå“**ã¨ã—ã¦ã®ç®±åº­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
* æœ€åˆã¯**ãŸã ã®ã‚­ãƒ¥ãƒ¼ãƒ–ç¾¤**ã¨ã—ã¦å®Ÿè£…ã—ã€ãã®å¾Œ**FBXãƒ¢ãƒ‡ãƒ«ï¼‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**ã¸å·®ã—æ›¿ãˆå¯èƒ½ãªæ§‹é€ ã€‚
* å€‹ä½“ã¯ Alife çš„ã«
  * ç§»å‹•
  * æˆé•·
  * ç¹æ®–
  * æ­»
    ã‚’ç¹°ã‚Šè¿”ã—ã€
    **è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆã‚³ãƒ­ãƒ‹ãƒ¼ï¼‰ãŒè‡ªç„¶ã«å½¢æˆã•ã‚Œã‚‹**ã‚ˆã†ãªå‰µç™ºã‚’ç‹™ã†ã€‚
* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ä¸Šã€**O(NÂ²)ã®å…¨ãƒšã‚¢åˆ¤å®šã¯ç¦æ­¢**ã€‚ç©ºé–“ã‚°ãƒªãƒƒãƒ‰ã§è¿‘å‚ã®ã¿ã‚’æ‰±ã†ã€‚

## è¨­è¨ˆã®åŸºæœ¬åŽŸå‰‡

1. **View ã¨ Simulationï¼ˆModelï¼‰ã®å®Œå…¨åˆ†é›¢**
   * Simulation Core ã¯**æ•°å€¤ã¨ãƒ­ã‚¸ãƒƒã‚¯ã ã‘**ã‚’æ‰±ã„ã€ã‚°ãƒ©ãƒ•ã‚£ã‚¯ã‚¹ã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ä¾å­˜ã—ãªã„ã€‚
   * View ã¯ Simulation ã®çŠ¶æ…‹ã‚’**èª­ã¿å–ã£ã¦æç”»ã™ã‚‹ã ã‘**ã§ã€Simå´ã®çŠ¶æ…‹ã‚’æ›¸ãæ›ãˆãªã„ã€‚
   * FBXã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Œäº†ã‚’å¾…ã£ã¦çŠ¶æ…‹é·ç§»ã‚’æ­¢ã‚ã‚‹ã€ãªã©**ã‚¢ãƒ‹ãƒ¡éƒ½åˆã§Simã‚’æ­¢ã‚ã‚‹ã“ã¨ã¯ç¦æ­¢**ã€‚

2. **å›ºå®šã‚¹ãƒ†ãƒƒãƒ—ã®æ™‚é–“é›¢æ•£åŒ–**
   * Simulation ã¯å›ºå®šÎ”tï¼ˆä¾‹ï¼š1/30ç§’ï¼‰ã§é€²ã‚€ã€‚
   * æç”»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã¨åˆ†é›¢ï¼ˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯è£œé–“ã—ã¦è¿½å¾“ï¼‰ã€‚
   * ã“ã‚Œã«ã‚ˆã‚Šé•·æœŸæŒ™å‹•ãŒå®‰å®šï¼†å†ç¾æ€§ãŒæ‹…ä¿ã—ã‚„ã™ã„ã€‚

3. **è² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å†…è”µã—ãŸã€Œè‡ªå·±èª¿æ•´ã€**
   * å€‹ä½“æ•°ã¯è‡ªç„¶ã«
     * **å…¨æ»…**
     * **ç„¡é™å¢—æ®–**
       ã«è¡ŒããŒã¡ãªã®ã§ã€
   * ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»ã€é£Ÿæ–™æž¯æ¸‡ã€éŽå¯†ã‚¹ãƒˆãƒ¬ã‚¹ã€ç—…æ°—ãªã©ã‚’é€šã˜ã¦**å±€æ‰€å¯†åº¦ã«å¿œã˜ãŸè‡ªç„¶æ¸›å°‘ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **ã‚’å…¥ã‚Œã¦ãŠãã€‚

4. **ã‚°ãƒªãƒƒãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç©ºé–“èªè­˜**
   * Reynolds ã® Boids ã®ã‚ˆã†ã«ã€ç¾¤ã‚ŒæŒ™å‹•ã¯ã€Œå±€æ‰€è¿‘å‚ã ã‘ã‚’è¦‹ã‚‹ã€ä»•çµ„ã¿ã§ååˆ†ã«å‰µç™ºãŒå‡ºã‚‹ã€‚([red3d.com][1])
   * ç©ºé–“ã‚°ãƒªãƒƒãƒ‰ï¼ˆSpatial Hashï¼‰ã‚’ç”¨ã„ã¦è¿‘å‚ã‚’é«˜é€Ÿå–å¾—ã—ã€**å…¨å€‹ä½“ãƒšã‚¢æŽ¢ç´¢ã‚’å›žé¿**ã€‚

5. **Utilityãƒ™ãƒ¼ã‚¹ã®æ„æ€æ±ºå®šï¼‹ã‚·ãƒ³ãƒ—ãƒ«FSM**
   * ã‚²ãƒ¼ãƒ AIã§ä¸€èˆ¬çš„ãª Utility-based Agent ã®ã‚ˆã†ã«ã€ã€Œè¤‡æ•°ã®æ¬²æ±‚ï¼ˆæº€è…¹ã€ç¹æ®–ã€å±é™ºå›žé¿â€¦ï¼‰ã«ã‚¹ã‚³ã‚¢ã‚’ä»˜ã‘ã¦ä¸€ç•ªé«˜ã„è¡Œå‹•ã‚’é¸ã¶ã€æ§‹é€ ã€‚([GeeksforGeeks][2])
   * é«˜ãƒ¬ãƒ™ãƒ«ã§ã¯æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFSMï¼‰ã§çŠ¶æ…‹ã‚’æ˜Žç¤ºã—ã€è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ã€‚

6. **â€œã‚°ãƒ«ãƒ¼ãƒ—ãŒã§ãã‚„ã™ãã€ç¶­æŒã•ã‚Œã‚„ã™ã„â€èˆžå°è¨­è¨ˆ**
   * è³‡æºãƒ‘ãƒƒãƒã€éºä¼çš„ãªè‰²ã‚¿ã‚°ã€å·£ï¼ˆãƒã‚¹ãƒˆï¼‰ã‚„ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³å ´ãªã©ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã€Œä¸€ã¤ã®å·¨å¤§ãªå›£å­ã€ã§ã¯ãªãã€**è¤‡æ•°ã®ã‚³ãƒ­ãƒ‹ãƒ¼ã«è‡ªç„¶åˆ†ç¯€ã™ã‚‹**ã‚ˆã†èª˜å°Žã™ã‚‹ã€‚

---

# 1. ãƒ¬ã‚¤ãƒ¤æ§‹æˆï¼ˆè²¬å‹™ã®åˆ†é›¢ï¼‰

### Layer 1: Simulation Coreï¼ˆä¸–ç•Œã®æœ¬ä½“ï¼‰

**è²¬å‹™**

* ç”Ÿå‘½ãƒ»è³‡æºãƒ»ç’°å¢ƒãƒ»æ™‚é–“ã«é–¢ã™ã‚‹ã™ã¹ã¦ã®ãƒ­ã‚¸ãƒƒã‚¯ã€‚

**ä¸»ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

* **WorldManager**
  * ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ã®ç®¡ç†ï¼ˆå›ºå®šã‚¹ãƒ†ãƒƒãƒ—é€²è¡Œï¼‰ã€‚
  * å„ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç’°å¢ƒãƒ»AIãƒ»ç‰©ç†ãƒ»ç”Ÿç‰©ã‚µã‚¤ã‚¯ãƒ«ï¼‰ã‚’é †ç•ªã«å‘¼ã¶ã€‚

* **EntityManager**
  * Agentï¼ˆå€‹ä½“ï¼‰ã®ç”Ÿæˆãƒ»å‰Šé™¤ã€‚
  * Agent ã®é…åˆ—ï¼ˆã¾ãŸã¯ãƒªã‚¹ãƒˆï¼‰ç®¡ç†ã€‚
  * æ­»äº¡ãƒ•ãƒ©ã‚°ãŒç«‹ã£ãŸå€‹ä½“ã®å¾Œå‡¦ç†ã€‚

* **SpatialGrid**
  * ç©ºé–“ã‚’å›ºå®šã‚µã‚¤ã‚ºã‚»ãƒ«ã«åˆ†å‰²ã—ã€å„ã‚»ãƒ«ã«å€‹ä½“IDãƒªã‚¹ãƒˆã‚’æŒã¤ã€‚
  * è¿‘å‚æ¤œç´¢ï¼ˆè‡ªã‚»ãƒ«ï¼‹éš£æŽ¥ã‚»ãƒ«ã®èµ°æŸ»ï¼‰ã‚’æä¾›ã€‚

* **EnvironmentSystem**
  * é£Ÿæ–™ãƒ‘ãƒƒãƒã®ç”Ÿæˆãƒ»å†ç”Ÿï¼ˆãƒªã‚¹ãƒãƒ¼ãƒ³ï¼‰ã€‚
  * å±é™ºã‚¨ãƒªã‚¢ãƒ»åŒ‚ã„å ´ï¼ˆãƒ•ã‚§ãƒ­ãƒ¢ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã®æ‹¡æ•£ãƒ»æ¸›è¡°ã€‚
  * å„ã‚»ãƒ«å˜ä½ã§ã®ã€Œè³‡æºé‡ã€ã€Œå±é™ºåº¦ã€ã€Œå±…å¿ƒåœ°åº¦ã€ãªã©ã‚’æ›´æ–°ã€‚
  * åŒã˜ã‚°ãƒ«ãƒ¼ãƒ—ãŒå¯†é›†ã™ã‚‹ã¨ã€ã‚°ãƒ«ãƒ¼ãƒ—å°‚ç”¨ã§ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚»ãƒ«å˜ä½ã§ç”Ÿæˆï¼ˆä¸Šé™ä»˜ããƒ»æ¸›è¡°ã‚ã‚Šï¼‰ã€‚

* **AISystem**
  * å„Agentã«å¯¾ã—ã€è¿‘å‚ã¨ç’°å¢ƒã‹ã‚‰ã€Œæ¬²æ±‚ã€ã¨ã€Œè¡Œå‹•ã€ã‚’æ±ºå®šã€‚
  * Utilityè¨ˆç®—ï¼‹FSMã«ã‚ˆã‚‹çŠ¶æ…‹é·ç§»ã€‚

* **SteeringSystem**
  * é¸æŠžã•ã‚ŒãŸè¡Œå‹•ã«åŸºã¥ãã€Seek / Wander / Separation / Alignment / Cohesion / Avoid ãªã©ã® Steering åŠ›ã‚’åˆæˆã—ã€ç›®æ¨™é€Ÿåº¦ãƒ»æ–¹å‘ã‚’æ±ºå®šã€‚([red3d.com][1])

* **LifeCycleSystem**
  * ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»ã€æˆé•·ã€å¯¿å‘½åˆ¤å®šã€‚
  * ç¹æ®–æ¡ä»¶åˆ¤å®šã¨æ–°å€‹ä½“ã®ç”Ÿæˆã€‚
  * å¯†åº¦ã«å¿œã˜ãŸè² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆç–«ç—…ãƒ»ç¹æ®–æŠ‘åˆ¶ãªã©ï¼‰ã‚’é©ç”¨ã€‚

---

### Layer 2: Visualizationï¼ˆè¦‹ãŸç›®ï¼‰

**è²¬å‹™**

* Simulation Core ã®çŠ¶æ…‹ã‚’èª­ã¿å–ã‚Šã€ç”»é¢ã«æŠ•å½±ã™ã‚‹ã€‚
* Simulation ã«ã¯**ä¸€åˆ‡æ›¸ãè¾¼ã¾ãªã„**ã€‚

**ä¸»ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

* **AgentViewMapper**
  * AgentData ã‚’ View ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä½ç½®ãƒ»å‘ããƒ»è‰²ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»çŠ¶æ…‹ID ãªã©ï¼‰ã¸å¤‰æ›ã€‚

* **CubeInstancingRendererï¼ˆãƒ•ã‚§ãƒ¼ã‚º1ï¼‰**
  * å¤§é‡ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚·ãƒ³ã‚°ã§æç”»ã€‚
  * è¡Œåˆ—ï¼ˆä½ç½®ãƒ»å›žè»¢ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰ï¼‹è‰²ãªã©ã®ãƒãƒƒãƒ•ã‚¡ã‚’æ¯Žãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°ã—ã¦ GPU ã¸é€ã‚‹ã€‚
  * æ•°åƒã€œæ•°ä¸‡ä½“ã‚¹ã‚±ãƒ¼ãƒ«ã‚’æƒ³å®šã€‚

* **FBXViewPoolï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ï¼‰**
  * ã‚ã‚‹ç¨‹åº¦å°‘ãªã„æ•°ï¼ˆè¿‘ã„å€‹ä½“ã€ä»£è¡¨å€‹ä½“ãªã©ï¼‰ã‚’ FBX ãƒ¢ãƒ‡ãƒ«ã§è¡¨ç¤ºã€‚
  * æ®‹ã‚Šã¯ã‚­ãƒ¥ãƒ¼ãƒ–ã‚„ãƒ“ãƒ«ãƒœãƒ¼ãƒ‰è¡¨ç¾ã«è½ã¨ã™ LOD ã‚‚æ¤œè¨Žã€‚
  * Animator ã«ã¯ Sim å´ã®ã€Œé€Ÿåº¦ã€ã€ŒçŠ¶æ…‹ã€ã€Œæˆé•·æ®µéšŽã€ãªã©ã‚’æ¸¡ã™ãŒã€Animator ã®äº‹æƒ…ã§ Sim ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ­¢ã‚ãªã„ã€‚

---

### Layer 3: Data & Configï¼ˆéºä¼å­ã¨ä¸–ç•Œè¨­å®šï¼‰

**è²¬å‹™**

* è¨­å®šå€¤ãƒ»ä¹±æ•°ã‚·ãƒ¼ãƒ‰ãƒ»éºä¼æƒ…å ±ãƒ»åˆæœŸãƒ¯ãƒ¼ãƒ«ãƒ‰æ§‹æˆã‚’ä¸€å…ƒç®¡ç†ã€‚
* å®Ÿé¨“ï¼ä½œå“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦å†ç¾å¯èƒ½ã«ã™ã‚‹ã€‚

**ä¸»ãªãƒ‡ãƒ¼ã‚¿**

* **SimulationConfig**
  * ä¹±æ•°ã‚·ãƒ¼ãƒ‰
  * ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚µã‚¤ã‚º
  * ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒƒãƒ—
  * åˆæœŸå€‹ä½“æ•°
  * è³‡æºãƒ‘ãƒƒãƒã®æ•°ãƒ»ä½ç½®ãƒ»å†ç”Ÿé€Ÿåº¦

  å¢ƒç•Œæ¡ä»¶: å¹³é¢ãƒ¯ãƒ¼ãƒ«ãƒ‰ã®åº§æ¨™ã¯å¸¸ã« `[0, world_size]` ã«åŽã¾ã‚Šã€å£ã§**åå°„ï¼ˆbounceï¼‰**ã™ã‚‹ã€‚åº§æ¨™ãŒå¤–ã«å‡ºãŸå ´åˆã¯å£é¢ã«é¡æ˜ ã—ã¦æˆ»ã—ã€å¯¾å¿œã™ã‚‹é€Ÿåº¦æˆåˆ†ã‚’åè»¢ã•ã›ã‚‹ã€‚ã“ã‚Œã«åŠ ãˆã¦å¢ƒç•Œè¿‘å‚ï¼ˆ`boundary_margin` å†…ï¼‰ã§ã¯ã‚½ãƒ•ãƒˆãª BoundaryForce ã‚’æŽ›ã‘ã¦å†…å‘ãã«èˆµã‚’åˆ‡ã‚‹ï¼ˆå¼·ã• `boundary_avoidance_weight`ã€å‘ãã®æ··åˆ `boundary_turn_weight`ã€0 ã§ç„¡åŠ¹åŒ–ï¼‰ã€‚

* **AgentGenetics / SpeciesConfig**
  * å¹³å‡å¯¿å‘½ãƒ»å¯¿å‘½ã°ã‚‰ã¤ã
  * åŸºæœ¬ç§»å‹•é€Ÿåº¦ãƒ»åŠ é€Ÿ
  * è¦–é‡ŽåŠå¾„ãƒ»è¦–é‡Žè§’
  * åŸºæœ¬ä»£è¬é‡
  * ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ï¼ˆè‰²ç›¸ï¼‰ãƒ»ãã®å¤‰ç•°å¹…

* **FeedbackConfig**
  * å€‹ä½“æ•°ä¸Šé™ã€å¯†åº¦ã—ãã„å€¤
  * å¯†åº¦ã«ã‚ˆã‚‹ç¹æ®–æŠ‘åˆ¶çŽ‡
  * ç–«ç—…ç™ºç”Ÿç¢ºçŽ‡ãªã©

---

### Layer 4: Observation & Loggingï¼ˆè¦³å¯Ÿãƒ»è¨˜éŒ²ï¼‰

**è²¬å‹™**

* é•·æœŸè¦³å¯Ÿç”¨ã«ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¿æƒ…å ±ã‚’è¨˜éŒ²ã€‚
* æ˜ åƒã¨ç´ã¥ããƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ã¨ã—ã¦æ´»ç”¨ã€‚

**ä¸»ãªè¦ç´ **

* ç·å€‹ä½“æ•°ãƒ»ä¸–ä»£æ•°ãƒ»å¹³å‡å¯¿å‘½ãƒ»æ­»äº¡åŽŸå› ã®æ¯”çŽ‡ãªã©ã®çµ±è¨ˆã€‚
* ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆç¾¤ã‚Œï¼‰ã”ã¨ã®å€‹ä½“æ•°æŽ¨ç§»ã€‚
* èª•ç”Ÿ/æ­»/å·£ã®å½¢æˆãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã€‚

Amorphous Fortress ã®ã‚ˆã†ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚¨ãƒ³ãƒ‰ãªãƒžãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç’°å¢ƒã§ã‚‚ã€ä¸–ç•Œæ§‹æˆã¨ãƒ­ã‚°ãŒæ˜Žç¤ºã•ã‚Œã¦ã„ã‚‹ã¨è¦³å¯Ÿãƒ»å†åˆ©ç”¨ãŒã—ã‚„ã™ã„ã€‚([Game Engineering][3])

---

# 2. ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆï¼ˆSimulation å´ï¼‰

## 2-1. AgentDataï¼ˆå€‹ä½“ï¼‰

**è­˜åˆ¥**

* ID
* ä¸–ä»£ï¼ˆ0, 1, 2, â€¦ï¼‰
* ã‚°ãƒ«ãƒ¼ãƒ—IDï¼ˆç¾¤ã‚Œã®æ‰€å±žã€‚å¯è¦–åŒ–ã«ã‚‚ä½¿ç”¨ï¼‰

**ä½ç½®ãƒ»é‹å‹•**

* ä½ç½®ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆè«–ç†çš„ã«ã¯2Då¹³é¢ã€Viewã§ã¯Yã‚’é«˜ã•ã§ä½¿ã£ã¦ã‚‚è‰¯ã„ï¼‰
* é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ«
* ç¾åœ¨ã®å‘ãï¼ˆheadingï¼‰
* Steering ã®ä¸€æ™‚çš„ãªåˆæˆçµæžœï¼ˆç›®æ¨™é€Ÿåº¦/æ–¹å‘ï¼‰

**ç”Ÿç†ãƒ»ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**

* å¹´é½¢
* æœ€å¤§å¯¿å‘½ï¼ˆéºä¼ã§æ±ºã¾ã‚‹ï¼‰
* ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆ0ã§æ­»äº¡ï¼‰
* ã‚µã‚¤ã‚ºï¼ˆæˆé•·åº¦åˆã„ï¼šå­ã©ã‚‚â†’å¤§äººâ†’è€ã„ï¼‰

**å†…éƒ¨çŠ¶æ…‹ï¼ˆè¡Œå‹•çŠ¶æ…‹ãƒ»æ™‚é–“ï¼‰**

* ç¾åœ¨ã®çŠ¶æ…‹ï¼ˆIdle / Wander / Forage / Eat / SeekMate / Mate / Rest / Flee / Dead ãªã©ï¼‰
* çŠ¶æ…‹ã«ã¨ã©ã¾ã£ã¦ã„ã‚‹æ™‚é–“ï¼ˆãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ç”¨ï¼‰

**æ¬²æ±‚ãƒ»ãƒ‰ãƒ©ã‚¤ãƒ–ï¼ˆUtilityè¨ˆç®—ç”¨ï¼‰**

* é£Ÿæ¬²ï¼ˆç©ºè…¹ãƒ¬ãƒ™ãƒ«ï¼‰
* ç¹æ®–æ¬²æ±‚
* ç¤¾ä¼šçš„æ¬²æ±‚ï¼ˆä»–å€‹ä½“ã¸ã®è¿‘æŽ¥ã‚’æ±‚ã‚ã‚‹åº¦åˆã„ï¼‰
* ä¼‘æ¯æ¬²æ±‚
* æŽ¢ç´¢æ¬²æ±‚ï¼ˆåŒã˜å ´æ‰€ã«é•·ãã„ã‚‹ã¨å¢—åŠ ï¼‰ ãªã©

**éºä¼å­ãƒ»ç‰¹æ€§ï¼ˆTraitsï¼‰**

* åŸºæœ¬ç§»å‹•é€Ÿåº¦ä¿‚æ•°
* è¦–é‡ŽåŠå¾„ãƒ»è¦–é‡Žè§’
* ä»£è¬çŽ‡ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰
* ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ï¼ˆä¾‹ï¼šè‰²ç›¸å€¤ 0ã€œ1ï¼‰
* ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ã¸ã®è¦ªå’Œæ€§ï¼ˆè‡ªåˆ†ã¨è¿‘ã„ã‚¿ã‚°ã‚’ã©ã‚Œã ã‘å¥½ã‚€ã‹ï¼‰

Guideless ALife ãƒ¢ãƒ‡ãƒ«ã®ã‚ˆã†ã«ã€äº‹å‰ã®é©å¿œåº¦é–¢æ•°ã‚’æ±ºã‚ãšã€ã€Œå±€æ‰€çš„ãƒ«ãƒ¼ãƒ«ã¨çªç„¶å¤‰ç•°ã€ã®çµæžœã¨ã—ã¦ç³»çµ±ãŒæ®‹ã£ãŸã‚Šæ¶ˆãˆãŸã‚Šã™ã‚‹æ§‹é€ ã‚’æ„è­˜ã™ã‚‹ã€‚([MIT Press Direct][4])

---

## 2-2. SpatialGridï¼ˆç©ºé–“ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰

**æ§‹é€ **

* ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚’å›ºå®šã‚»ãƒ«ï¼ˆä¾‹ï¼š2mÃ—2mï¼‰ã«åŒºåˆ‡ã‚‹ã€‚
* å„ã‚»ãƒ«ã¯ã€Œãã“ã«ã„ã‚‹ Agent ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒªã‚¹ãƒˆã€ã‚’æŒã¤ã€‚

**é‹ç”¨**

* å„ Simulation ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ã€å…¨ Agent ã®ä½ç½®ã‹ã‚‰ã‚»ãƒ«ã‚’è¨ˆç®—ã—ã€Grid ã«å†ç™»éŒ²ã€‚
* å®Ÿè£…ã‚’ç°¡å˜ã«ã™ã‚‹ãªã‚‰ã€Œæ¯Žãƒ•ãƒ¬ãƒ¼ãƒ å…¨ã‚»ãƒ«ã‚’ã‚¯ãƒªã‚¢â†’å…¨ Agent ã‚’ç™»éŒ²ã€æ–¹å¼ã§ã‚‚ã€æ•°åƒä½“è¦æ¨¡ãªã‚‰ç¾ä»£ç’°å¢ƒã§ååˆ†é«˜é€Ÿã€‚

**è¿‘å‚æ¤œç´¢**

* Agent ãŒè¿‘å‚ã‚’èª¿ã¹ã‚‹ã¨ãã¯
  * è‡ªã‚»ãƒ«
  * å‘¨å›²8ã‚»ãƒ«
    ã ã‘ã‚’è¦‹ã‚‹ã€‚
* ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€è¨ˆç®—é‡ã¯æ¦‚ã­ O(N Ã— è¿‘å‚æ•°) ã«è½ã¡ã‚‹ã€‚

---

## 2-3. Environmentï¼ˆç’°å¢ƒï¼‰

* **è³‡æºãƒ‘ãƒƒãƒ**
  * ä½ç½®ãƒ»åŠå¾„
  * ç¾åœ¨ã®è³‡æºé‡
  * æœ€å¤§è³‡æºé‡
  * å†ç”Ÿé€Ÿåº¦ï¼ˆæ™‚é–“ã‚ãŸã‚Šã®å›žå¾©ï¼‰

* **å±é™ºã‚¨ãƒªã‚¢**
  * ä½ç½®ãƒ»ç¯„å›²
  * ãƒ€ãƒ¡ãƒ¼ã‚¸é‡ï¼ˆæ™‚é–“ã‚ãŸã‚Šï¼‰

* **å ´ï¼ˆFieldï¼‰**
  * ã‚°ãƒªãƒƒãƒ‰ã‚»ãƒ«å˜ä½ã®ã‚¹ã‚«ãƒ©ãƒ¼/ãƒ™ã‚¯ãƒˆãƒ«å ´
    * é£Ÿæ–™å¯†åº¦
    * å·£ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³æ¿ƒåº¦ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—IDã”ã¨ï¼‰
    * å±é™ºåº¦ï¼ˆç«äº‹ãƒ»æ¯’ãªã©ï¼‰

---

# 3. æ›´æ–°ãƒ«ãƒ¼ãƒ—ï¼ˆSimulation ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

å›ºå®šÎ”tã”ã¨ã«ä»¥ä¸‹ã®é †åºã§å‡¦ç†ï¼š

1. **Grid æ›´æ–°**
   * å…¨ Agent ã®ä½ç½®ã‹ã‚‰ã‚»ãƒ«ã‚’å†è¨ˆç®—ã—ã€SpatialGrid ã‚’æ§‹ç¯‰ã€‚

2. **ç’°å¢ƒæ›´æ–°ï¼ˆEnvironmentStepï¼‰**
   * è³‡æºãƒ‘ãƒƒãƒã®å›žå¾©ãƒ»æž¯æ¸‡å‡¦ç†ã€‚
   * ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³ã‚„å·£ã®â€œåŒ‚ã„å ´â€ã®æ‹¡æ•£ãƒ»æ¸›è¡°ã€‚
   * ç½å®³ã‚¤ãƒ™ãƒ³ãƒˆã‚’å…¥ã‚Œã‚‹ãªã‚‰ã“ã“ã§å®Ÿè¡Œï¼ˆå­£ç¯€å¤‰åŒ–ãƒ»å¤©å€™ãªã©ï¼‰ã€‚

3. **æ„Ÿè¦šï¼ˆPerceptionï¼‰**
   * å„ Agent ãŒ SpatialGrid ã‚’ä½¿ã£ã¦è¿‘å‚ Agent/è³‡æºã‚’å–å¾—ã€‚
   * è¿‘å‚ã‚»ãƒ«ã®çµ±è¨ˆï¼ˆå€‹ä½“æ•°ã€å¹³å‡å‘ãã€å¹³å‡è‰²ã‚¿ã‚°ãªã©ï¼‰ã‚‚å–å¾—ã€‚

4. **æ„æ€æ±ºå®šï¼ˆDecision / AIï¼‰**
   * å†…éƒ¨çŠ¶æ…‹ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ã€å¹´é½¢ã€æ¬²æ±‚ãƒ‰ãƒ©ã‚¤ãƒ–ï¼‰ã¨è¿‘å‚æƒ…å ±ã‚’å…ƒã«ã€è¡Œå‹•å€™è£œã”ã¨ã® Utilityï¼ˆæº€è¶³åº¦ï¼‰ã‚’è¨ˆç®—ã€‚([GeeksforGeeks][2])
   * ã‚‚ã£ã¨ã‚‚ã‚¹ã‚³ã‚¢ã®é«˜ã„è¡Œå‹•ã«å¯¾å¿œã™ã‚‹ FSM çŠ¶æ…‹ã¸é·ç§»ã€‚
   * çŠ¶æ…‹é·ç§»ã«ã¯ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ï¼ˆç²˜ã‚Šï¼‰ã¨ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚’è¨­å®šã—ã¦ã€Œè¿·ã„è¡Œå‹•ã€ã‚’é˜²æ­¢ã€‚

5. **Steering è¨ˆç®—**
   * çŠ¶æ…‹ã”ã¨ã®ç›®çš„ã«å¿œã˜ã¦ã€ä»¥ä¸‹ã® Steering ã‚’åˆæˆï¼š
     * Separationï¼ˆè¿‘ã™ãŽã‚‹å€‹ä½“ã‹ã‚‰é›¢ã‚Œã‚‹ï¼‰
     * Alignmentï¼ˆè¿‘å‚ã¨é€²è¡Œæ–¹å‘ã‚’åˆã‚ã›ã‚‹ï¼‰
     * Cohesionï¼ˆè¿‘å‚ã®ä¸­å¿ƒã¸å‘ã‹ã†ï¼‰
     * Seekï¼ˆé£Ÿæ–™/å·£/äº¤é…ç›¸æ‰‹ãªã©ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¸å‘ã‹ã†ï¼‰
     * Wanderï¼ˆãƒ©ãƒ³ãƒ€ãƒ ãªæºã‚‰ãŽã§è‡ªç„¶ã•ã‚’å‡ºã™ï¼‰
     * ObstacleAvoid / BoundaryForceï¼ˆå£ã‚„å¤–å‘¨ã‹ã‚‰é›¢ã‚Œã‚‹ã€‚`boundary_margin` å†…ã§å†…å‘ãã«èª˜å°Žï¼‰
   * Reynolds ã® Steering Behaviors åŒæ§˜ã€è¤‡æ•°ã®å˜ç´”ãªãƒ™ã‚¯ãƒˆãƒ«ã‚’é‡ã¿ä»˜ãã§è¶³ã—åˆã‚ã›ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¢ãƒ‡ãƒ«ã€‚([red3d.com][1])

6. **é‹å‹•æ›´æ–°ï¼ˆIntegrationï¼‰**
   * Steering çµæžœã‹ã‚‰é€Ÿåº¦ã‚’æ›´æ–°ã—ã€é€Ÿåº¦ã‚’ä¸Šé™ã§åˆ¶é™ã€‚
   * ä½ç½®ã‚’æ›´æ–°ã—ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰å¤–ã«å‡ºãªã„ã‚ˆã†è£œæ­£ã€‚
   * ç°¡æ˜“çš„ãªæŠ¼ã—å‡ºã—ï¼ˆé‡ãªã‚Šè§£æ¶ˆï¼‰ã¯ Separation ã®å¼·ã•ã§å¸åŽã™ã‚‹è¨­è¨ˆã§ã‚‚ã‚ˆã„ã€‚

7. **ç”Ÿç‰©å­¦çš„æ›´æ–°ï¼ˆLifeCycleï¼‰**
   * æ™‚é–“çµŒéŽã«ã‚ˆã‚‹å¹´é½¢ï¼‹æˆé•·æ®µéšŽã®æ›´æ–°ã€‚
   * ç§»å‹•è·é›¢ãªã©ã«å¿œã˜ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»ã€‚
   * ã‚¨ãƒãƒ«ã‚®ãƒ¼0ä»¥ä¸‹ã‚„å¯¿å‘½è¶…éŽã§æ­»äº¡ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹ã€‚

8. **ç¹æ®–ï¼†æ­»äº¡å‡¦ç†**
   * ç¹æ®–æ¡ä»¶ã‚’æº€ãŸã™ãƒšã‚¢ã‚’ã€è¿‘å‚å†…ã‹ã‚‰é¸æŠžã€‚
   * æ–°å€‹ä½“ã‚’ç”Ÿæˆã—ã€è¦ªã®éºä¼å­ï¼‹å°ãƒ©ãƒ³ãƒ€ãƒ å¤‰ç•°ã§ Traits ã‚’æ±ºå®šã€‚
   * æ­»äº¡ãƒ•ãƒ©ã‚°ã®ç«‹ã£ãŸå€‹ä½“ã‚’å‰Šé™¤ã—ã€ãã®ä½ç½®ã«ã‚ãšã‹ãªè³‡æºï¼ˆé£Ÿæ–™ï¼‰ã‚’é‚„å…ƒã™ã‚‹ãªã©ã®å¾ªç’°ã‚’å…¥ã‚Œã‚‹ã€‚

9. **è² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é©ç”¨**
   * ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªç·å€‹ä½“æ•°ã¨ã€ã‚»ãƒ«ã”ã¨ã®å±€æ‰€å¯†åº¦ã‚’è©•ä¾¡ã€‚
   * å¯†åº¦ãŒé«˜ã™ãŽã‚‹ã‚»ãƒ«ã§ã¯ï¼š
     * ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»å¢—åŠ 
     * ç¹æ®–æˆåŠŸçŽ‡ä½Žä¸‹
     * ç–«ç—…ï¼ˆãƒ©ãƒ³ãƒ€ãƒ æ­»äº¡ç¢ºçŽ‡ï¼‰ã®ç™ºç”Ÿ ãªã©ã‚’é©ç”¨ã—ã€**éŽå¯†çŠ¶æ…‹ã‚’è‡ªç„¶ã«è§£æ¶ˆã™ã‚‹æ–¹å‘**ã¸æŠ¼ã™ã€‚

10. **çµ±è¨ˆãƒ»ãƒ­ã‚°æ›´æ–°**
    * å€‹ä½“æ•°ã€ç¾¤ã‚Œã®æ•°ã€å¹³å‡å¯¿å‘½ã€æ­»äº¡åŽŸå› åˆ†å¸ƒãªã©ã‚’åŽé›†ã€‚
    * ã‚¢ãƒ¼ãƒˆä½œå“ã¨ã—ã¦é‡è¦ãªæœŸé–“ã‚’æ¤œå‡ºãƒ»è¨˜éŒ²ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã€‚

---

# 4. è¡Œå‹•æ±ºå®šã¨ç¾¤ã‚Œå½¢æˆã®ä»•æŽ›ã‘

## 4-1. Utilityï¼‹FSM ã«ã‚ˆã‚‹è¡Œå‹•æ±ºå®š

**å€™è£œè¡Œå‹•ã®ä¾‹**

* é£Ÿäº‹ï¼ˆForage / Eatï¼‰
* æŽ¢ç´¢ï¼ˆWanderï¼‰
* ç¾¤ã‚Œè¡Œå‹•ï¼ˆFlockï¼‰
* ç¹æ®–ï¼ˆSeekMate / Mateï¼‰
* ä¼‘æ¯ï¼ˆRestï¼‰
* å±é™ºå›žé¿ï¼ˆFleeï¼‰

**Utility è¨ˆç®—ã®åŸºæœ¬**

* è¡Œå‹•ã”ã¨ã«ã€ã€Œå¯¾å¿œã™ã‚‹æ¬²æ±‚ãƒ‰ãƒ©ã‚¤ãƒ–ã€ï¼‹ã€Œç’°å¢ƒæ¡ä»¶ã€ã‹ã‚‰ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ã€‚
* ä¾‹ï¼‰
  * é£Ÿäº‹ï¼šç©ºè…¹åº¦ãŒé«˜ãã€è¿‘ãã«è³‡æºãŒã‚ã‚‹ã¨ãã‚¹ã‚³ã‚¢ä¸Šæ˜‡ã€‚
  * ç¹æ®–ï¼šã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒååˆ†ã§ã€è¿‘ãã«ç›¸æ€§ã®è‰¯ã„ç›¸æ‰‹ãŒã„ã‚‹ã¨ãã‚¹ã‚³ã‚¢ä¸Šæ˜‡ã€‚
  * ä¼‘æ¯ï¼šã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ã‚ã‚‹ãŒã€æ´»å‹•æ™‚é–“ãŒé•·ãç–²åŠ´ã—ã¦ã„ã‚‹ã¨ãã‚¹ã‚³ã‚¢ä¸Šæ˜‡ã€‚

**FSM ã¨ã®é–¢ä¿‚**

* Utility ã§ã€Œæ¬¡ã«ã‚„ã‚ŠãŸã„è¡Œå‹•ã€ã‚’æ±ºã‚ã‚‹ã€‚
* FSM ã¯ã€Œä»Šã®çŠ¶æ…‹ãŒä½•ã§ã€ã„ã¤çµ‚ãˆã‚‹ã‹ã€ã‚’ç®¡ç†ï¼š
  * ä¾‹ï¼šé£Ÿäº‹çŠ¶æ…‹ã«å…¥ã£ãŸã‚‰ã€ä¸€å®šæ™‚é–“ or æº€è…¹ã«ãªã‚‹ã¾ã§ç¶šã‘ã‚‹ã€‚
* ã“ã‚Œã«ã‚ˆã‚Šã€Amorphous Fortress ã®ã‚ˆã†ãª FSM ãƒ™ãƒ¼ã‚¹ã®å¤šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç³»ã§è¦‹ã‚‰ã‚Œã‚‹**â€œè¡Œå‹•ã®ã¾ã¨ã¾ã‚Šâ€ã¨â€œå‰µç™ºâ€**ã‚’ç¶­æŒã—ã¤ã¤ã€Utility ã§æŸ”è»Ÿæ€§ã‚’æŒãŸã›ã‚‹ã€‚([arXiv][5])

---

## 4-2. è¤‡æ•°ã‚°ãƒ«ãƒ¼ãƒ—ãŒã§ãã‚‹ãŸã‚ã®è¦ç´ 

1. **è³‡æºãƒ‘ãƒƒãƒã®åˆ†å¸ƒ**
   * ãƒžãƒƒãƒ—ã«è¤‡æ•°ã®è³‡æºãƒ‘ãƒƒãƒã‚’é…ç½®ï¼ˆä¾‹ï¼š3ã€œ7ç®‡æ‰€ï¼‰ã€‚
   * ãã‚Œãžã‚Œå†ç”Ÿé€Ÿåº¦ã‚„å®‰å…¨åº¦ã‚’å¾®å¦™ã«å¤‰ãˆã‚‹ã€‚
   * ç¾¤ã‚Œã¯è‡ªç„¶ã«ãã‚Œãžã‚Œã®ãƒ‘ãƒƒãƒå‘¨è¾ºã«å®šä½ã—ã‚„ã™ããªã‚‹ã€‚

2. **ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ï¼ˆè‰²ç›¸ï¼‰ã¨éºä¼çš„è¦ªå’Œæ€§**
   * å„å€‹ä½“ã¯ `ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ï¼ˆè‰²ç›¸å€¤ï¼‰` ã‚’æŒã¡ã€ãã‚ŒãŒè¦‹ãŸç›®ã®è‰²ã«ã‚‚åæ˜ ã•ã‚Œã‚‹ã€‚
   * Steering ã® Cohesion / Alignment ã®å¼·ã•ã‚’ã€ã‚¿ã‚°é¡žä¼¼åº¦ã«å¿œã˜ã¦å¤‰åŒ–ã•ã›ã‚‹ï¼š
     * ä¼¼ãŸã‚¿ã‚°ã«ã¯ Cohesion ã‚’å¼·ã
     * ç•°ãªã‚‹ã‚¿ã‚°ã«ã¯ Separation ã‚’ã‚„ã‚„å¼·ã
   * å­ã©ã‚‚ã¯è¦ªã®ã‚¿ã‚°ã‚’ç¶™æ‰¿ã—ã¤ã¤ã€å°ã•ãªå¤‰ç•°ã‚’åŠ ãˆã‚‹ã€‚
     â†’ ã“ã‚Œã«ã‚ˆã‚Šã€**è‰²ã”ã¨ã®ç¾¤ã‚Œãƒ»è¡€çµ±**ãŒè‡ªç„¶ã«åˆ†å²ã—ã‚„ã™ããªã‚‹ã€‚

3. **å·£ï¼ˆNestï¼‰ã¨ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³å ´**
   * ç¹æ®–ãŒæˆåŠŸã—ãŸåœ°ç‚¹ã«ã€Œå·£ã€ã‚’å½¢æˆã—ã€ãã®å‘¨å›²ã«ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³å ´ã‚’ç™ºç”Ÿã•ã›ã‚‹ã€‚
   * ãƒ•ã‚§ãƒ­ãƒ¢ãƒ³å ´ã¯æ™‚é–“ã¨ã¨ã‚‚ã«æ¸›è¡°ã™ã‚‹ãŒã€åŒã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ã®å€‹ä½“ã¯ãã“ã‚’ã€Œå±…å¿ƒåœ°ãŒè‰¯ã„ã€ã¨æ„Ÿã˜ã¦æˆ»ã‚Šã‚„ã™ããªã‚‹ã€‚
   * çµæžœã¨ã—ã¦ã€**ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã®â€œã‚³ãƒ­ãƒ‹ãƒ¼ä¸­å¿ƒåœ°â€ãŒã§ãã‚‹**ã€‚

4. **éŽå¯†æŠ‘åˆ¶ã«ã‚ˆã‚‹åˆ†æ•£**
   * ä¸€ã¤ã®è³‡æºãƒ‘ãƒƒãƒã‚„å·£å‘¨è¾ºãŒéŽå¯†ã«ãªã‚‹ã¨ã€ãã“ã«ã„ã‚‹å€‹ä½“ã®
     * ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»å¢—åŠ 
     * ç¹æ®–æˆåŠŸçŽ‡ä½Žä¸‹
       ãªã©ã®ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’ã‹ã‘ã‚‹ã€‚
   * ã“ã‚Œã«ã‚ˆã‚Šä¸€éƒ¨ã¯ä»–ã®è³‡æºãƒ‘ãƒƒãƒã¸ç§»ä½ã—ã€ä¸–ç•Œå…¨ä½“ã§**è¤‡æ•°ã®ã‚³ãƒ­ãƒ‹ãƒ¼ãŒå…±å­˜**ã—ã‚„ã™ããªã‚‹ã€‚

5. **ã‚°ãƒ«ãƒ¼ãƒ—ç¶­æŒã¨é›¢è„±ã®ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹**
   * è¿‘å‚ã‚»ãƒ«å†…ã§é›†ã‚ãŸåŒã‚°ãƒ«ãƒ¼ãƒ—ã®ã†ã¡ã€`group_cohesion_radius` æœªæº€ã®è·é›¢ã«ã„ã‚‹è¿‘è·é›¢ä»²é–“æ•°ã‚’æ•°ãˆã‚‹ã€‚
   * é›¢è„±åˆ¤å®šã«ã¯ `group_detach_radius` ã‚’ä½¿ã„ã€Cohesion ã®å°„ç¨‹ã¨å­¤ç«‹åˆ¤å®šã®å°„ç¨‹ã‚’åˆ†ã‘ã¦ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã‚’æŒãŸã›ã‚‹ã€‚
   * è¿‘è·é›¢ä»²é–“æ•°ãŒ `group_detach_close_neighbor_threshold` æœªæº€ã®çŠ¶æ…‹ãŒ `group_detach_after_seconds` ç¶šãã¨ã€æ‰€å±žã‚’å¼±ã‚ã‚‹ã€‚
     * ã¾ãšè¿‘å‚ã®å¤šæ•°æ´¾ã‚°ãƒ«ãƒ¼ãƒ—ã¸ `group_switch_chance` ã®ç¢ºçŽ‡ã§å†æ‰€å±žã€‚
     * å¤šæ•°æ´¾ãŒç„¡ã„ï¼ç¢ºçŽ‡ã‚’å¤–ã—ãŸå ´åˆã¯æœªæ‰€å±žï¼ˆ_UNGROUPEDï¼‰ã«æˆ»ã‚‹ã€‚
   * è¿‘è·é›¢ã«å‘³æ–¹ãŒæˆ»ã‚Œã°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¯å³åº§ã« 0 ã¸ãƒªã‚»ãƒƒãƒˆã•ã‚Œã€1ã€œ2tickã®ãƒãƒ©ã¤ãã§æºã‚Œãªã„ã€‚
   * `group_adoption_neighbor_threshold` ã¯ã‚°ãƒ«ãƒ¼ãƒ—ã‚µã‚¤ã‚ºã«å¿œã˜ã¦ç·©å’Œã•ã‚Œã€å°è¦æ¨¡ã‚°ãƒ«ãƒ¼ãƒ—ã»ã©è¿‘å‚ 1ã€œ2 ä½“ã§ã‚‚æŽ¡ç”¨ã•ã‚Œã‚„ã™ã„ã€‚æŽ¡ç”¨ç¢ºçŽ‡ã‚‚ `group_adoption_small_group_bonus` ã§å°ã•ãªã‚°ãƒ«ãƒ¼ãƒ—ã‚’å„ªé‡ã—ã¤ã¤ 1.0 ã«ã‚¯ãƒ©ãƒ³ãƒ—ã™ã‚‹ã€‚
   * Steering å´ã§ã¯åŒã‚°ãƒ«ãƒ¼ãƒ—ãƒ»è¿‘è·é›¢ã®å¹³å‡ä½ç½®ã¸ Cohesion ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¿½åŠ ã—ï¼ˆé‡ã¿ `group_cohesion_weight`ï¼‰ã€å¯†é›†ã—ã‚„ã™ã•ã‚’ä¸Šã’ã‚‹ã€‚
   * ã“ã‚Œã‚‰ã¯ã™ã¹ã¦è¿‘å‚ã‚»ãƒ«å†…ã®ãƒ‡ãƒ¼ã‚¿ã ã‘ã§è¨ˆç®—ã•ã‚Œã€O(NÂ²) ã‚’é¿ã‘ã¤ã¤ Phase1 ã®ã€Œè¤‡æ•°ã‚³ãƒ­ãƒ‹ãƒ¼ãŒè‡ªç„¶ã«åˆ†ã‹ã‚Œã‚‹ã€èª˜å°Žã¨æ•´åˆã™ã‚‹ã€‚

   **ä¸»è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆFeedbackConfigï¼‰**

   * `group_cohesion_radius`: Cohesion ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¨ˆç®—ã™ã‚‹ã€Œä»²é–“ã¨ã¿ãªã™è·é›¢ã€(default: 6.0)ã€‚
   * `group_detach_radius`: å­¤ç«‹åˆ¤å®šã«ä½¿ã†è¿‘è·é›¢ä»²é–“ã®è·é›¢ (default: 6.0)ã€‚
   * åŒã‚°ãƒ«ãƒ¼ãƒ—åŒå£«ã® Separation ã¯å¼±ã‚ã«ã—ã€åˆ†æ•£ã—ã™ãŽãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
   * `group_detach_close_neighbor_threshold`: ã“ã®äººæ•°æœªæº€ãŒç¶šãã¨å­¤ç«‹æ‰±ã„ã™ã‚‹è¿‘è·é›¢ä»²é–“æ•° (default: 1)ã€‚
   * `group_detach_after_seconds`: å­¤ç«‹ãŒã“ã®ç§’æ•°ç¶šã„ãŸã‚‰æ‰€å±žã‚’å¼±ã‚ã‚‹ (default: 5.0)ã€‚
   * `group_switch_chance`: é›¢è„±æ™‚ã«è¿‘å‚å¤šæ•°æ´¾ã¸ä¹—ã‚Šæ›ãˆã‚‹ç¢ºçŽ‡ (default: 0.2)ã€‚
   * `group_cohesion_weight`: é€Ÿåº¦è¨ˆç®—ã«ãŠã‘ã‚‹åŒã‚°ãƒ«ãƒ¼ãƒ— Cohesion ãƒ™ã‚¯ãƒˆãƒ«ã®é‡ã¿ (default: 0.6)ã€‚

---

# 5. View è¨­è¨ˆï¼šã‚­ãƒ¥ãƒ¼ãƒ– â†’ FBX ã¸ã®ã‚¹ãƒ ãƒ¼ã‚ºãªç§»è¡Œ

## 5-1. Phase 1ï¼šã‚­ãƒ¥ãƒ¼ãƒ–è¡¨ç¾

**ç›®çš„**

* ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»å‰µç™ºãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œè¨¼ã‚’é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã§è¡Œã†ãƒ•ã‚§ãƒ¼ã‚ºã€‚

**è¡¨ç¾ãƒ«ãƒ¼ãƒ«ã®ä¾‹**

* ä½ç½®ãƒ»å‘ãï¼šAgentData ã® position / heading ã‚’ãã®ã¾ã¾åæ˜ ã€‚
* è‰²ç›¸ï¼šã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°ï¼ˆè¡€çµ±ï¼‰ã‚’ç›´æŽ¥è‰²ã«ãƒžãƒƒãƒ”ãƒ³ã‚°ã€‚
* æ˜Žåº¦ãƒ»è¼åº¦ï¼šã‚¨ãƒãƒ«ã‚®ãƒ¼é‡ã‚’åæ˜ ï¼ˆå¼±ã‚‹ã¨æš—ããªã‚‹ãªã©ï¼‰ã€‚
* ã‚¹ã‚±ãƒ¼ãƒ«ï¼š
  * å­ã©ã‚‚ï¼šå°ã•ã„
  * å¤§äººï¼šæ¨™æº–ã‚µã‚¤ã‚º
  * è€ã„ï¼šã‚„ã‚„ç¸®ã‚€ or æºã‚‰ãŽãŒå¢—ã™
* ç™ºå…‰ã‚„ãƒ‘ãƒ«ã‚¹ï¼š
  * ç¹æ®–å¯èƒ½çŠ¶æ…‹ï¼ˆrepro æ¬²æ±‚ãŒé«˜ã„ã¨ãï¼‰ã«æ·¡ã„ç‚¹æ»…ã‚’å…¥ã‚Œã‚‹ã€‚

ã“ã‚Œã ã‘ã§ã€ä¸Šã‹ã‚‰è¦‹ãŸã¨ãã«

* ã€Œã©ã“ã«ã©ã‚“ãªè¡€çµ±ã®ç¾¤ã‚ŒãŒã„ã‚‹ã‹ã€
* ã€Œã©ã“ãŒè‹¥ã„ã‚³ãƒ­ãƒ‹ãƒ¼ã§ã€ã©ã“ãŒè€ã„ã¦ã„ã‚‹ã‹ã€
* ã€Œç¹æ®–ãŒæ´»ç™ºãªã‚¾ãƒ¼ãƒ³ã¯ã©ã“ã‹ã€

ãŒ**ä¸€ç›®ã§åˆ†ã‹ã‚‹çµµ**ã«ãªã‚‹ã€‚

## 5-2. Phase 2ï¼šFBXï¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

**åŸºæœ¬æ–¹é‡**

* Simulation å´ã«ã¯ä¸€åˆ‡æ‰‹ã‚’å…¥ã‚Œãšã€View å±¤ã®å·®ã—æ›¿ãˆã®ã¿ã§å®Ÿç¾ã€‚
* å€‹ã€…ã® FBX ã¯ â€œä»£è¡¨çš„ãªå€‹ä½“â€ ã‚„ â€œã‚«ãƒ¡ãƒ©ã«è¿‘ã„å€‹ä½“â€ ã«é™å®šã—ã€é æ™¯ã¯å¼•ãç¶šãã‚­ãƒ¥ãƒ¼ãƒ–ã‚„ç°¡æ˜“ãƒ¢ãƒ‡ãƒ«ã§è¡¨ç¾ï¼ˆLODï¼‰ã€‚

**View ãŒå—ã‘å–ã‚‹æƒ…å ±**

* ä½ç½®ãƒ»å‘ã
* ç§»å‹•é€Ÿåº¦ï¼ˆAnimator ã® Speed ã«åæ˜ ï¼‰
* è¡Œå‹•çŠ¶æ…‹ï¼ˆIdle / Walk / Eat / Mate / Sleep ãªã©ï¼‰
* æˆé•·æ®µéšŽï¼ˆChild / Adult / Oldï¼‰

**Animator ã¨ã®é–¢ä¿‚**

* Animation ã®é·ç§»ã¯ã€Sim å´ã®çŠ¶æ…‹IDã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å—ã‘å–ã‚‹ã®ã¿ã€‚
* ã€Œã‚¢ãƒ‹ãƒ¡ãŒçµ‚ã‚ã‚‹ã¾ã§çŠ¶æ…‹é·ç§»ã—ãªã„ã€ã€Œã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã§ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ¶å¾¡ã€ãªã©ã¯è¡Œã‚ãªã„ï¼ˆã‚ãã¾ã§ç‰‡æ–¹å‘ï¼‰ã€‚

---

# 6. é•·æœŸè¦³å¯Ÿç”¨ã®å®‰å®šæ€§ã¨ãƒªã‚¹ã‚¯ç®¡ç†

## 6-1. å®‰å®šé‹ç”¨ã®ãŸã‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

* **å€‹ä½“æ•°ç®¡ç†**
  * ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªæœ€å¤§å€‹ä½“æ•°ã‚­ãƒ£ãƒƒãƒ—ã€‚
  * ã‚­ãƒ£ãƒƒãƒ—è¿‘è¾ºã§ã¯ç¹æ®–æˆåŠŸçŽ‡ã‚’è‡ªå‹•ã§ä¸‹ã’ã‚‹ã€‚

* **å±€æ‰€å¯†åº¦ç®¡ç†**
  * SpatialGrid ã§ã‚»ãƒ«ã”ã¨ã«å€‹ä½“æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã€‚
  * ã—ãã„å€¤è¶…ãˆã‚»ãƒ«ã§ã¯
    * ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»å¢—åŠ 
    * ç–«ç—…ã®ç¢ºçŽ‡çš„ç™ºç”Ÿ
      ãªã©ã§è‡ªç„¶ã«å¯†åº¦ã‚’ä¸‹ã’ã‚‹ã€‚

* **è³‡æºãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹**
  * ä¸€åº¦é£Ÿã¹å°½ãã—ãŸè³‡æºãƒ‘ãƒƒãƒã¯ã—ã°ã‚‰ãæž¯æ¸‡ã—ã€ãã®é–“ã¯ä»–ãƒ‘ãƒƒãƒã«ç§»å‹•ã›ã–ã‚‹ã‚’å¾—ãªã„ã€‚
  * é•·æœŸçš„ã«ã¯ã€å­£ç¯€å¤‰åŒ–ã‚„ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã§è³‡æºé…ç½®ã‚’ã‚ãšã‹ã«æºã‚‰ã™ã“ã¨ã§ã€ã‚³ãƒ­ãƒ‹ãƒ¼ãŒå›ºå®šã—ã™ãŽãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
  * ï¼ˆå®Ÿè£…ä¾‹ï¼‰æ±ºå®šè«–çš„ãªã€Œæ°—å€™ãƒŽã‚¤ã‚ºã€ã§é£Ÿæ–™å†ç”Ÿã‚’ã‚†ã£ãã‚Šæºã‚‰ã™ï¼š`EnvironmentConfig.food_regen_noise_amplitude` / `food_regen_noise_interval_seconds` / `food_regen_noise_smooth_seconds`

## 6-2. æƒ³å®šãƒªã‚¹ã‚¯ã¨è¨­è¨ˆä¸Šã®å¯¾ç­–ï¼ˆè¦ç´„ï¼‰

* å€‹ä½“æ•°çˆ†ç™º â†’ è² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‹å€‹ä½“æ•°ã‚­ãƒ£ãƒƒãƒ—ã€‚
* å…¨å“¡ãŒåŒã˜å ´æ‰€ã«å›£å­çŠ¶æ…‹ â†’ è³‡æºæž¯æ¸‡ãƒ»ã‚¿ã‚°æ–¥åŠ›ãƒ»å·£ã®è¤‡æ•°é…ç½®ã€‚
* è¡Œå‹•ãŒã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã—ã¦èª­ã‚ãªã„ â†’ Utilityï¼‹FSMï¼‹ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ã§ã€Œã¾ã¨ã¾ã‚Šã€ã‚’ä½œã‚‹ã€‚
* FBX åŒ–ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãŒå´©å£Š â†’ LOD ã¨éƒ¨åˆ†çš„ãª FBX è¡¨ç¤ºã«ç•™ã‚ã‚‹ï¼ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’åŸºæœ¬ã«ã™ã‚‹ã€‚

---

[1]: https://www.red3d.com/cwr/steer/gdc99/?utm_source=chatgpt.com "Steering Behaviors For Autonomous Characters - red3d.com"
[2]: https://www.geeksforgeeks.org/artificial-intelligence/utility-based-agents-in-ai/?utm_source=chatgpt.com "Utility-Based Agents in AI"
[3]: https://game.engineering.nyu.edu/research/amorphous-fortress/?utm_source=chatgpt.com "Amorphous Fortress - Game Innovation Lab"
[4]: https://direct.mit.edu/artl/article/31/1/31/127798/Guideless-Artificial-Life-Model-for-Reproduction?utm_source=chatgpt.com "Guideless Artificial Life Model for Reproduction ..."
[5]: https://arxiv.org/html/2306.13169?utm_source=chatgpt.com "Observing Emergent Behavior in Multi-Agent FSMs"

## ä»˜éŒ²: 2025-12 å®‰å®šåŒ–ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ¢

- åˆæœŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç¹æ®–é–¾å€¤ã® 80% ã«å¼•ãä¸Šã’ã€ç¹æ®–é–¾å€¤ã‚’ 12ã€æˆä½“å¹´é½¢ã‚’ 5 ã«ä¸‹ã’ã¦ç«‹ã¡ä¸ŠãŒã‚Šã‚’æ—©ãã—ãŸã€‚
- ç¹æ®–ç¢ºçŽ‡ã¯å±€æ‰€å¯†åº¦è¶…éŽã«å¿œã˜ã¦æ»‘ã‚‰ã‹ã«æ¸›å°‘ã™ã‚‹ï¼ˆDensityReproductionPenalty ã‚’åŸºç‚¹ã« DensityReproductionSlope ã§é€“æ¸›ï¼‰ã€‚ç©ºé–“ã‚°ãƒªãƒƒãƒ‰ã®è¿‘å‚ã ã‘ã‚’æ•°ãˆã‚‹ã®ã§ O(NÂ²) ã«ã¯ãªã‚‰ãªã„ã€‚
- é«˜ã‚¨ãƒãƒ«ã‚®ãƒ¼çŠ¶æ…‹ã«ã¯è¿½åŠ ã®ä»£è¬ã‚³ã‚¹ãƒˆï¼ˆEnergySoftCap, HighEnergyMetabolismSlopeï¼‰ã‚’èª²ã—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç©ã¿ä¸ŠãŒã‚Šã‚’é˜²ãã€‚
- åŸºç¤Žãƒ»åŠ é½¢ãƒ»å¯†åº¦ã«æ¯”ä¾‹ã™ã‚‹æ­»äº¡ãƒã‚¶ãƒ¼ãƒ‰ï¼ˆBaseDeathProbabilityPerSecond, AgeDeathProbabilityPerSecond, DensityDeathProbabilityPerNeighborPerSecondï¼‰ã‚’å°Žå…¥ã—ã€å‡ºç”Ÿ/æ­»äº¡ã®ã‚µã‚¤ã‚¯ãƒ«ãŒæ­¢ã¾ã‚‰ãªã„ã‚ˆã†ã«ã—ãŸã€‚
- ã™ã¹ã¦ã®å‡¦ç†ã¯ Simulation å´ã«é–‰ã˜ã¦ãŠã‚Šã€View ã¯çŠ¶æ…‹ã‚’èª­ã‚€ã ã‘ã§åˆ¶å¾¡ã—ãªã„ã€‚è² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯å±€æ‰€æƒ…å ±ã®ã¿ã§è¨ˆç®—ã—ã€æ±ºå®šè«–çš„ RNG ã‚’ä½¿ã†ãŸã‚ãƒªãƒ—ãƒ¬ã‚¤å¯èƒ½ã€‚

- environment_tick_interval (default 0.12s) batches diffusion/decay to keep environment updates cheap.
- boundary_avoidance_weight and boundary_turn_weight steer agents gently back inside before reflective walls flip velocity.
- Lonely agents only switch when neighbors meet group_adoption_neighbor_threshold; otherwise they may seed a new group via group_detach_new_group_chance or briefly become ungrouped.
- Pheromone decay remains > 0 and prune_pheromones(active_groups) trims layers so keys stay bounded by (cell count x live groups).
